<mat-progress-bar mode="indeterminate" color="warn" [style.display]="showSpinner ? 'block' : 'none'"></mat-progress-bar>

<button class="mx-1 btn-imprimir no-print" mat-mini-fab color="accent" matTooltip="Imprimir" (click)="imprimir()">
  <mat-icon>print</mat-icon>
</button>

<div class="container no-print">
  <form id="form" [formGroup]="formulario" (ngSubmit)="enviar()" fxLayout="row" fxLayoutAlign="space-between center">

    <div fxFlex="10">
      <mat-form-field>
        <input type="number" matInput placeholder="Año" formControlName="anio">
      </mat-form-field>
    </div>

    <div fxFlex="60" fxFlexOffset="5">
      <ng-select [items]="carreras" [placeholder]="'Carrera'" bindLabel="nombre" bindValue="id"
        formControlName="id_carrera" (change)="cambioCarrera($event)">
      </ng-select>
    </div>

    <div fxFlex="10" fxFlexOffset="5">
      <mat-form-field>
        <input type="number" min="1" max="10" matInput placeholder="Curso" formControlName="curso">
      </mat-form-field>
    </div>

    <div fxFlex fxFlexOffset="5">
      <button mat-raised-button color="primary" type="submit" form="form"
        [disabled]="!formulario.valid || showSpinner">Buscar</button>
    </div>

  </form>
</div>



<div class="container" fxLayout="row" fxLayoutAlign="space-between center">
  <div fxFlex="60">
    <p>CARRERA: {{ carrera }}</p>
  </div>

  <div fxFlex="10" fxFlexOffset="5">
    <p>AÑO: {{ formulario.value.curso }}</p>
  </div>

  <div fxFlex="20" fxFlexOffset="5">
    <p>CICLO LECTIVO: {{ formulario.value.anio }}</p>
  </div>
</div>

<div class="container">
  <table>
    <thead>
      <tr>
        <th height="50">HORARIO</th>
        <th>LUNES</th>
        <th>MARTES</th>
        <th>MIERCOLES</th>
        <th>JUEVES</th>
        <th>VIERNES</th>
        <th *ngIf="mostrarSabado">SABADO</th>
      </tr>
    </thead>
    <tbody class="text-center">
      <tr>
        <td height="100">17:30</td>
        <td>
          <ng-container *ngFor="let horario of horarios">
            <ng-container *ngIf="horario.dia === 1 && horario.hora_inicio === '17:30'">
              <p>{{ horario.materia }}</p>
              <p><small>{{ horario.modulos }} Horas</small></p>
              <p><small>{{ horario.profesor }}</small></p>
            </ng-container>
          </ng-container>
        </td>
        <td>
          <ng-container *ngFor="let horario of horarios">
            <ng-container *ngIf="horario.dia === 2 && horario.hora_inicio === '17:30'">
              <p>{{ horario.materia }}</p>
              <p><small>{{ horario.modulos }} Horas</small></p>
              <p><small>{{ horario.profesor }}</small></p>
            </ng-container>
          </ng-container>
        </td>
        <td>
          <ng-container *ngFor="let horario of horarios">
            <ng-container *ngIf="horario.dia === 3 && horario.hora_inicio === '17:30'">
              <p>{{ horario.materia }}</p>
              <p><small>{{ horario.modulos }} Horas</small></p>
              <p><small>{{ horario.profesor }}</small></p>
            </ng-container>
          </ng-container>
        </td>
        <td>
          <ng-container *ngFor="let horario of horarios">
            <ng-container *ngIf="horario.dia === 4 && horario.hora_inicio === '17:30'">
              <p>{{ horario.materia }}</p>
              <p><small>{{ horario.modulos }} Horas</small></p>
              <p><small>{{ horario.profesor }}</small></p>
            </ng-container>
          </ng-container>
        </td>
        <td>
          <ng-container *ngFor="let horario of horarios">
            <ng-container *ngIf="horario.dia === 5 && horario.hora_inicio === '17:30'">
              <p>{{ horario.materia }}</p>
              <p><small>{{ horario.modulos }} Horas</small></p>
              <p><small>{{ horario.profesor }}</small></p>
            </ng-container>
          </ng-container>
        </td>
        <td *ngIf="mostrarSabado">
          <ng-container *ngFor="let horario of horarios">
            <ng-container *ngIf="horario.dia === 6 && horario.hora_inicio === '17:30'">
              <p>{{ horario.materia }}</p>
              <p><small>{{ horario.modulos }} Horas</small></p>
              <p><small>{{ horario.profesor }}</small></p>
            </ng-container>
          </ng-container>
        </td>
      </tr>
      <tr>
        <td height="100">18:30</td>
        <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 1 && horario.hora_inicio === '18:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 2 && horario.hora_inicio === '18:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 3 && horario.hora_inicio === '18:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 4 && horario.hora_inicio === '18:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 5 && horario.hora_inicio === '18:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td *ngIf="mostrarSabado">
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 6 && horario.hora_inicio === '18:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
      </tr>
      <tr>
        <td height="100">19:30</td>
        <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 1 && horario.hora_inicio === '19:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 2 && horario.hora_inicio === '19:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 3 && horario.hora_inicio === '19:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 4 && horario.hora_inicio === '19:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 5 && horario.hora_inicio === '19:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td *ngIf="mostrarSabado">
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 6 && horario.hora_inicio === '19:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
      </tr>
      <tr>
        <td height="100">20:30</td>
        <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 1 && horario.hora_inicio === '20:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 2 && horario.hora_inicio === '20:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 3 && horario.hora_inicio === '20:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 4 && horario.hora_inicio === '20:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td>
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 5 && horario.hora_inicio === '20:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
          <td *ngIf="mostrarSabado">
            <ng-container *ngFor="let horario of horarios">
              <ng-container *ngIf="horario.dia === 6 && horario.hora_inicio === '20:30'">
                <p>{{ horario.materia }}</p>
                <p><small>{{ horario.modulos }} Horas</small></p>
                <p><small>{{ horario.profesor }}</small></p>
              </ng-container>
            </ng-container>
          </td>
      </tr>
    </tbody>
  </table>
</div>